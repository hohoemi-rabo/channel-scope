# チャンネルスコープ 要件定義書

## 1. サービス概要

### 1.1 基本情報

- **サービス名**: チャンネルスコープ
- **英語表記**: ChannelScope
- **キャッチコピー**: 配信者のための無料分析ツール
- **サービス説明**: YouTube チャンネルの成長を可視化する、シンプルで使いやすい分析サービス

### 1.2 ターゲットユーザー

- 個人配信者（初心者〜中堅）
- 競合チャンネルをリサーチしたい配信者
- チャンネルの成長を客観的に把握したい配信者

### 1.3 提供価値

- ログイン不要で即座に分析開始
- 直感的な UI で誰でも簡単に使える
- 完全無料で全機能を利用可能

## 2. 機能要件

### 2.1 チャンネル検索機能

#### 検索フロー

1. トップページの検索ボックスにチャンネル名を入力
2. 部分一致でチャンネル候補をリアルタイム表示
3. 候補から目的のチャンネルを選択
4. 分析結果ページへ遷移

#### 検索仕様

- **検索方式**: チャンネル名の部分一致検索
- **候補表示**: 最大 10 件まで表示
- **検索履歴**: 実装しない（MVP 版）

### 2.2 動画データ取得・表示

#### データ取得仕様

- **取得動画数**: 最新 50 本
- **更新頻度**: リアルタイム（API 直接呼び出し）
- **キャッシュ**: Vercel KV 使用、30 分間保持

#### 表示項目（動画ごと）

- 動画サムネイル（中サイズ：320x180px）
- 動画タイトル
- 再生数（カンマ区切り表示）
- いいね数
- コメント数
- 投稿日時
- 動画時間

### 2.3 分析機能

#### ソート機能

- **再生数順**（デフォルト）
- **投稿日順**（新しい順/古い順）
- **伸び率順**
- **コメント率順**
- **いいね率順**

#### 分析指標の計算式

```
伸び率スコア = 再生数 ÷ (公開からの日数 + 1)
コメント率 = (コメント数 ÷ 再生数) × 100
いいね率 = (いいね数 ÷ 再生数) × 100
```

#### 特別な表示

- 公開から 3 日以内の動画：「NEW」バッジを表示
- 伸び率が特に高い動画：「急上昇」バッジを表示

### 2.4 データ可視化

#### グラフ仕様

- **種類**: 折れ線グラフ（アニメーション付き）
- **データ**: 最新 10 本の動画の再生数推移
- **ライブラリ**: Recharts または Chart.js
- **デザイン**: グラデーション付きのモダンなスタイル
- **インタラクション**: ホバーで詳細表示

### 2.5 共有機能

#### SNS シェア

- X（Twitter）シェアボタン
- シェア時テキスト例：

  ```
  「[チャンネル名]」を分析しました！
  最高再生数：[数値]回

  #チャンネルスコープ
  [URL]
  ```

#### OGP 設定

- **画像サイズ**: 1200x630px
- **動的生成**: Vercel OG の`@vercel/og`を使用
- **表示内容**:
  - サービスロゴ
  - チャンネル名
  - 主要統計（総再生数、動画本数など）
  - キャッチコピー

## 3. 非機能要件

### 3.1 パフォーマンス要件

- **ページロード時間**: 3 秒以内を目標
- **API 応答時間**: 2 秒以内
- **対応デバイス**: PC（50%）、モバイル（50%）
- **レスポンシブ対応**: 必須

### 3.2 セキュリティ要件

- YouTube Data API キーはサーバーサイドで管理
- 環境変数での管理（`YOUTUBE_API_KEY`）
- CORS 設定の適切な実装

### 3.3 制限事項対応

#### API 制限対応

- **制限**: 1 日 10,000 ユニット
- **対策**:
  - Vercel KV による 30 分キャッシュ
  - 同一 IP からの連続リクエスト制限（1 分間に 10 回まで）
  - 制限到達時のメッセージ表示

#### エラーハンドリング

| エラー種別         | 表示メッセージ                                                 |
| ------------------ | -------------------------------------------------------------- |
| チャンネル未検出   | 該当するチャンネルが見つかりません。再度確認してください。     |
| API 制限到達       | 現在アクセスが集中しています。5 分後に再度お試しください。     |
| ネットワークエラー | 通信エラーが発生しました。しばらくしてから再度お試しください。 |
| 削除/非公開動画    | 一部の動画は非公開または削除されているため表示できません。     |

## 4. UI/UX 設計

### 4.1 ページ構成

#### トップページ

```
[ヘッダー]
- ロゴ「チャンネルスコープ」
- キャッチコピー

[メインエリア]
- 大きな検索ボックス
- プレースホルダー「YouTubeチャンネル名を入力」
- 検索ボタン（虫眼鏡アイコン）

[フッター]
- 免責事項リンク
- © 2024 チャンネルスコープ
```

#### 分析結果ページ

```
[ヘッダー]
- ロゴ（トップへのリンク）
- 新規検索ボタン

[チャンネル情報]
- チャンネル名
- チャンネルアイコン
- 登録者数

[グラフエリア]
- 最新10本の再生数推移グラフ

[ソートタブ]
- 再生数 | 投稿日 | 伸び率 | コメント率 | いいね率

[動画リスト]
- サムネイル | タイトル | 統計情報
- 無限スクロール or ページネーション

[シェアボタン]
- Xでシェア
```

### 4.2 デザイン仕様

- **カラーテーマ**:
  - プライマリ: #FF0000（YouTube 風レッド）
  - セカンダリ: #282828（ダークグレー）
  - アクセント: #00D4FF（シアン）
- **フォント**: Noto Sans JP
- **アニメーション**: Framer Motion 使用
- **アイコン**: Heroicons / Lucide React

## 5. 技術仕様

### 5.1 技術スタック

| 項目           | 技術                       | バージョン |
| -------------- | -------------------------- | ---------- |
| フレームワーク | Next.js (App Router)       | 15.x       |
| 言語           | TypeScript                 | 5.x        |
| スタイリング   | Tailwind CSS + CSS Modules | 3.4.17     |
| アニメーション | Framer Motion              | 11         |
| 状態管理       | Zustand                    | 4          |
| グラフ         | Recharts                   | 最新       |
| アイコン       | Lucide React               | 最新       |
| キャッシュ     | Vercel KV                  | -          |
| OGP 画像生成   | @vercel/og                 | 最新       |
| 分析           | Vercel Analytics           | -          |
| デプロイ       | Vercel                     | -          |

### 5.2 ディレクトリ構造

```
channelscope/
├── app/
│   ├── layout.tsx
│   ├── page.tsx
│   ├── channel/
│   │   └── [id]/
│   │       └── page.tsx
│   ├── api/
│   │   ├── youtube/
│   │   │   ├── search/
│   │   │   │   └── route.ts
│   │   │   └── channel/
│   │   │       └── [id]/
│   │   │           └── route.ts
│   │   └── og/
│   │       └── route.tsx
│   └── globals.css
├── components/
│   ├── SearchBar.tsx
│   ├── ChannelCard.tsx
│   ├── VideoList.tsx
│   ├── VideoCard.tsx
│   ├── Chart.tsx
│   └── ShareButton.tsx
├── lib/
│   ├── youtube.ts
│   ├── cache.ts
│   └── utils.ts
├── types/
│   └── index.ts
└── public/
    └── logo.svg
```

### 5.3 API 設計

#### YouTube Data API v3 使用エンドポイント

1. **チャンネル検索**: `/search`

   - パラメータ: `q`, `type=channel`, `maxResults=10`
   - 消費ユニット: 100

2. **チャンネル詳細**: `/channels`

   - パラメータ: `id`, `part=snippet,statistics`
   - 消費ユニット: 3

3. **動画リスト取得**: `/search`

   - パラメータ: `channelId`, `order=date`, `maxResults=50`
   - 消費ユニット: 100

4. **動画詳細**: `/videos`
   - パラメータ: `id`, `part=statistics,contentDetails`
   - 消費ユニット: 3

#### 内部 API 設計

```typescript
// /api/youtube/search
GET /api/youtube/search?q={query}
Response: {
  channels: [{
    id: string,
    title: string,
    thumbnail: string,
    subscriberCount: number
  }]
}

// /api/youtube/channel/[id]
GET /api/youtube/channel/{channelId}
Response: {
  channel: {...},
  videos: [{
    id: string,
    title: string,
    thumbnail: string,
    viewCount: number,
    likeCount: number,
    commentCount: number,
    publishedAt: string,
    duration: string
  }]
}
```

## 6. 実装優先順位

### Phase 1: MVP（1 週間）

1. 基本的な UI 構築
2. YouTube API 連携
3. チャンネル検索・表示
4. 動画リスト表示
5. 基本的なソート機能

### Phase 2: 分析機能（3 日）

1. 伸び率計算の実装
2. グラフ表示
3. 各種ソート機能の完成
4. バッジ表示機能

### Phase 3: 最適化（3 日）

1. Vercel KV キャッシュ実装
2. OGP 画像動的生成
3. SNS シェア機能
4. エラーハンドリング強化
5. パフォーマンス最適化

### Phase 4: 公開準備（1 日）

1. 免責事項ページ作成
2. Vercel Analytics 設定
3. 本番環境デプロイ
4. 動作確認

## 7. 運用・保守

### 7.1 監視項目

- API 使用量（日次）
- エラー発生率
- ページロード時間
- ユーザーアクセス数

### 7.2 免責事項

```
【免責事項】
・本サービスはYouTubeの公開データを利用した参考値を提供します
・本サービスはYouTube及びGoogle LLCと提携していません
・データの正確性・完全性は保証いたしません
・分析結果は参考情報としてご利用ください
```

### 7.3 将来の拡張案

- お気に入りチャンネル登録機能
- 複数チャンネル比較
- 急上昇予測 AI
- タイトル/タグ分析
- CSV 出力機能
- 通知機能（動画急上昇アラート）

## 8. リスク管理

| リスク           | 影響度 | 対策                       |
| ---------------- | ------ | -------------------------- |
| API 制限到達     | 高     | キャッシュ強化、使用量監視 |
| YouTube 仕様変更 | 中     | API 更新の定期確認         |
| 不適切な利用     | 低     | 利用規約明記、レート制限   |
| サーバー負荷     | 中     | Vercel 自動スケーリング    |

---

**作成日**: 2025 年 09 月
**バージョン**: 1.0.0
